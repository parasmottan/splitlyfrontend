import{u as b,a as v,r as p,j as e}from"./index-7P9_Ad09.js";import{b as S}from"./index-Bk2wgpwC.js";import{u as E}from"./groupStore-CxgG4Chr.js";import{A as u}from"./Avatar-D6mourTr.js";import{B as w}from"./BottomNav-BXrit2cQ.js";import{S as y}from"./Skeleton-DlW_DT0e.js";import"./index-DHHGR6MN.js";const C=p.memo(function({members:i,max:d=3}){const h=(i==null?void 0:i.slice(0,d))||[],s=((i==null?void 0:i.length)||0)-d;return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[h.map((f,n)=>{var o,l;return e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:"2px solid white",marginLeft:n===0?0:"-7px",zIndex:d-n,position:"relative",overflow:"hidden"},children:e.jsx(u,{name:((o=f.user)==null?void 0:o.name)||"?",style:{width:"24px",height:"24px",fontSize:"10px",minWidth:"24px",minHeight:"24px"}})},((l=f.user)==null?void 0:l._id)||n)}),s>0&&e.jsxs("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:"2px solid white",marginLeft:"-7px",background:"#E5E5EA",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"700",color:"#636366",zIndex:0},children:["+",s]})]})}),k=p.memo(function({group:i,onClick:d}){var c,g,t,a;const h=((c=i.balance)==null?void 0:c.youOwe)||0,s=((g=i.balance)==null?void 0:g.youAreOwed)||0,f=(t=i.balance)==null?void 0:t.isSettled;let n="",o="";h>0?(n=`-$${h.toLocaleString()}`,o="#FF3B30"):s>0?(n=`+$${s.toLocaleString()}`,o="#34C759"):f&&(n="Settled",o="#8E8E93");let l="";i.lastExpense?l=`Last activity: ${i.lastExpense.timeAgo||"recently"}`:i.createdAt&&(l=`Created ${new Date(i.createdAt).toLocaleDateString("en-IN",{month:"short",day:"numeric"})}`);const r=((a=i._id)==null?void 0:a.slice(-1))>"8";return e.jsxs("div",{onClick:d,style:{background:r?"#1C1C2E":"#fff",borderRadius:"24px",padding:"16px",cursor:"pointer",position:"relative",overflow:"hidden",minHeight:"160px",display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",transition:"transform 120ms ease-out"},children:[n&&e.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"5px 10px",borderRadius:"100px",background:n==="Settled"?"#E5E5EA":`${o}20`,border:`1px solid ${o}30`},children:e.jsx("span",{style:{fontSize:"13px",fontWeight:"700",color:o},children:n})}),e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"16px",overflow:"hidden",marginBottom:"12px"},children:e.jsx(u,{name:i.name,style:{width:"52px",height:"52px",fontSize:"22px",borderRadius:"16px"}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"18px",fontWeight:"700",color:r?"#fff":"#1C1C1E",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.name}),e.jsx(C,{members:i.members,max:3}),e.jsx("p",{style:{fontSize:"12px",color:r?"rgba(255,255,255,0.5)":"#8E8E93",marginTop:"6px"},children:l})]})]})});function O(){const x=b(),{groups:i,loading:d,fetchGroups:h}=E(),{user:s}=v(),[f,n]=p.useState(!1),[o,l]=p.useState("");p.useEffect(()=>{h()},[]);const r=p.useMemo(()=>i.filter(t=>!t.archived),[i]),c=p.useMemo(()=>{if(!o.trim())return r;const t=o.toLowerCase();return r.filter(a=>a.name.toLowerCase().includes(t))},[r,o]),g=p.useCallback(t=>x(`/groups/${t}`),[x]);return e.jsxs("div",{style:{background:"#F2F2F7",display:"flex",flexDirection:"column",minHeight:"100dvh",maxWidth:"430px",margin:"0 auto",position:"relative"},children:[e.jsxs("div",{style:{padding:"16px 20px 0"},children:[f?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",paddingBottom:"12px"},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx(S,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#8E8E93",fontSize:"18px"}}),e.jsx("input",{autoFocus:!0,type:"text",value:o,onChange:t=>l(t.target.value),placeholder:"Search groups...",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"12px",border:"none",background:"#E5E5EA",outline:"none",fontSize:"17px",color:"#1C1C1E"}})]}),e.jsx("button",{onClick:()=>{n(!1),l("")},style:{background:"none",border:"none",cursor:"pointer",color:"#007AFF",fontSize:"17px",fontWeight:"400"},children:"Cancel"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",paddingBottom:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:e.jsx(u,{name:(s==null?void 0:s.name)||"U",style:{width:"40px",height:"40px",fontSize:"16px"}})}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",color:"#1C1C1E",flex:1,letterSpacing:"-0.3px"},children:"Groups"}),e.jsx("button",{onClick:()=>n(!0),style:{background:"none",border:"none",cursor:"pointer",color:"#1C1C1E",fontSize:"22px"},children:e.jsx(S,{})})]}),e.jsxs("div",{style:{display:"flex",gap:"16px",overflowX:"auto",paddingBottom:"16px",WebkitOverflowScrolling:"touch",scrollbarWidth:"none"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",flexShrink:0,cursor:"pointer"},onClick:()=>x("/get-started"),children:[e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"50%",background:"#fff",border:"2px dashed #C7C7CC",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#8E8E93"},children:"+"}),e.jsx("span",{style:{fontSize:"12px",color:"#8E8E93",fontWeight:"500"},children:"New"})]}),["Sarah","Mike","Alex"].map((t,a)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",flexShrink:0,cursor:"pointer"},children:[e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"50%",border:a===0?"2.5px solid #6347F5":"2.5px solid transparent",overflow:"hidden"},children:e.jsx(u,{name:t,style:{width:"52px",height:"52px",fontSize:"18px"}})}),e.jsx("span",{style:{fontSize:"12px",color:"#1C1C1E",fontWeight:"500"},children:t})]},t))]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",padding:"0 20px",paddingBottom:"100px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("p",{style:{fontSize:"13px",fontWeight:"700",color:"#8E8E93",textTransform:"uppercase",letterSpacing:"0.8px"},children:"YOUR GROUPS"}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"var(--blue)",cursor:"pointer"},children:"Sort: Activity"})]}),d&&r.length===0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[1,2,3,4].map(t=>e.jsxs("div",{style:{background:"#fff",borderRadius:"24px",padding:"16px",minHeight:"160px"},children:[e.jsx(y,{width:"52px",height:"52px",borderRadius:"16px",style:{marginBottom:"12px"}}),e.jsx(y,{width:"80%",height:"18px",style:{marginBottom:"8px"}}),e.jsx(y,{width:"60%",height:"12px"})]},t))}),!d&&r.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"ðŸ‘¥"}),e.jsx("h3",{style:{fontSize:"22px",fontWeight:"700",color:"#1C1C1E",marginBottom:"8px"},children:"No groups yet"}),e.jsx("p",{style:{fontSize:"16px",color:"#8E8E93",marginBottom:"32px"},children:"Create a group to start splitting with friends."}),e.jsx("button",{onClick:()=>x("/get-started"),style:{padding:"14px 32px",background:"var(--blue)",color:"#fff",fontSize:"17px",fontWeight:"600",borderRadius:"100px",border:"none",cursor:"pointer",boxShadow:"0 8px 24px rgba(99,71,245,0.3)"},children:"Create Group"})]}),c.length>0&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"24px"},children:[c.map(t=>e.jsx(k,{group:t,onClick:()=>g(t._id)},t._id)),e.jsxs("div",{onClick:()=>x("/get-started"),style:{background:"rgba(255,255,255,0.5)",borderRadius:"24px",padding:"16px",cursor:"pointer",minHeight:"160px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"2px dashed var(--gray-300)",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"32px",color:"#8E8E93"},children:"+"}),e.jsx("span",{style:{fontSize:"15px",fontWeight:"600",color:"#8E8E93"},children:"Create Group"})]})]}),o&&c.length===0&&r.length>0&&e.jsx("div",{style:{textAlign:"center",padding:"60px 20px"},children:e.jsxs("p",{style:{fontSize:"17px",color:"#8E8E93"},children:['No groups matching "',o,'"']})}),c.length>0&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"13px",fontWeight:"700",color:"#8E8E93",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"12px"},children:"RECENT ACTIVITY"}),r.slice(0,3).map((t,a)=>{var m,j;return t.lastExpense&&e.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"14px 16px",marginBottom:"10px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(99,71,245,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},children:"ðŸ’¸"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("p",{style:{fontSize:"15px",fontWeight:"600",color:"#1C1C1E",margin:"0 0 2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[(j=(m=t.lastExpense.paidBy)==null?void 0:m.name)==null?void 0:j.split(" ")[0],' paid for "',t.lastExpense.description,'"']}),e.jsxs("p",{style:{fontSize:"13px",color:"#8E8E93",margin:0},children:[t.lastExpense.timeAgo||"recently"," â€¢ ",t.name]})]})]},a)})]})]}),e.jsx(w,{showFab:!1})]})}export{O as default};
