import{u as k,a as F,r as p,j as e}from"./index-BHupY-1O.js";import{b as w,c as z}from"./index-EZ73y7cY.js";import{u as A}from"./groupStore-o5BPHBEj.js";import{A as E}from"./Avatar-ooviBXjW.js";import{B as I}from"./BottomNav-CVtZk7x2.js";import{S as f}from"./Skeleton-CNOUj2sV.js";import"./index-Bt5ibiO2.js";const W=p.memo(function({members:t,max:l=3}){const d=(t==null?void 0:t.slice(0,l))||[],c=((t==null?void 0:t.length)||0)-l;return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.map((a,s)=>{var i,r;return e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid white",marginLeft:s===0?0:"-8px",zIndex:l-s,position:"relative",overflow:"hidden"},children:e.jsx(E,{name:((i=a.user)==null?void 0:i.name)||"?",style:{width:"28px",height:"28px",fontSize:"11px",minWidth:"28px",minHeight:"28px"}})},((r=a.user)==null?void 0:r._id)||s)}),c>0&&e.jsxs("div",{style:{width:"28px",height:"28px",borderRadius:"50%",border:"2px solid white",marginLeft:"-8px",background:"#E5E5EA",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",fontWeight:"600",color:"#636366",position:"relative",zIndex:0},children:["+",c]})]})}),B=p.memo(function({group:t,onClick:l,currSymbol:d}){var n,m,y,j,b,v;const c=((n=t.balance)==null?void 0:n.youOwe)||0,a=((m=t.balance)==null?void 0:m.youAreOwed)||0,s=(y=t.balance)==null?void 0:y.isSettled,i=!c&&!a&&!s,r=t.lastExpense;let u="";if(r){const C=((b=(j=r.paidBy)==null?void 0:j.name)==null?void 0:b.split(" ")[0])||"someone",S=r.timeAgo||"";u=`Last added by ${C}${S?` • ${S}`:""}`}else t.createdAt&&(u=`Created ${new Date(t.createdAt).toLocaleDateString("en-IN",{month:"short",day:"numeric"})}`);let o="",x="",g="#8E8E93";return c>0?(o="You owe",x=`${d}${c.toLocaleString("en-IN")}`,g="#FF3B30"):a>0?(o="You are owed",x=`${d}${a.toLocaleString("en-IN")}`,g="#34C759"):(o="No expenses",x=`${d}0`,g="#8E8E93"),e.jsxs("div",{onClick:l,style:{background:"#FFFFFF",borderRadius:"16px",padding:"16px",marginBottom:"12px",cursor:"pointer",boxShadow:"0 0.5px 1px rgba(0,0,0,0.03), 0 1px 4px rgba(0,0,0,0.04)",transition:"transform 120ms ease-out"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(E,{name:t.name,style:{width:"48px",height:"48px",fontSize:"18px",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("h4",{style:{fontSize:"17px",fontWeight:"600",color:"#1C1C1E",margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:t.name}),s&&e.jsx("span",{style:{fontSize:"11px",fontWeight:"700",color:"#34C759",background:"#E5F9EC",padding:"3px 8px",borderRadius:"4px",letterSpacing:"0.5px",flexShrink:0,lineHeight:"16px"},children:"SETTLED"}),i&&!s&&e.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:"#8E8E93",background:"#F2F2F7",padding:"3px 8px",borderRadius:"4px",letterSpacing:"0.5px",flexShrink:0,lineHeight:"16px"},children:"CLEAN"})]}),e.jsx("p",{style:{fontSize:"13px",color:"#8E8E93",margin:"2px 0 0",lineHeight:"18px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u||`${((v=t.members)==null?void 0:v.length)||0} members`})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"14px"},children:[e.jsx(W,{members:t.members,max:3}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"13px",color:"#8E8E93",margin:"0 0 2px",lineHeight:"16px",fontWeight:"400"},children:o}),e.jsx("p",{style:{fontSize:"17px",fontWeight:"700",color:g,margin:0,lineHeight:"22px",letterSpacing:"-0.2px"},children:x})]})]})]})});function D(){const h=k(),{groups:t,loading:l,fetchGroups:d}=A(),{user:c}=F(),[a,s]=p.useState(!1),[i,r]=p.useState("");p.useEffect(()=>{d()},[]);const u="₹",o=p.useMemo(()=>t.filter(n=>!n.archived),[t]),x=p.useMemo(()=>{if(!i.trim())return o;const n=i.toLowerCase();return o.filter(m=>m.name.toLowerCase().includes(n))},[o,i]),g=p.useCallback(n=>{h(`/groups/${n}`)},[h]);return e.jsxs("div",{style:{background:"#F2F2F7",display:"flex",flexDirection:"column",minHeight:"100dvh",maxWidth:"430px",margin:"0 auto",position:"relative"},children:[e.jsx("div",{style:{padding:"12px 20px 0"},children:a?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(w,{style:{position:"absolute",left:"12px",color:"#8E8E93",fontSize:"18px",pointerEvents:"none"}}),e.jsx("input",{autoFocus:!0,type:"text",value:i,onChange:n=>r(n.target.value),placeholder:"Search groups...",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"12px",border:"none",background:"#E5E5EA",outline:"none",fontSize:"17px",color:"#1C1C1E"}})]}),e.jsx("button",{onClick:()=>{s(!1),r("")},style:{background:"none",border:"none",cursor:"pointer",color:"#007AFF",fontSize:"17px",fontWeight:"400",padding:"4px 0",flexShrink:0},children:"Cancel"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[e.jsx("h1",{style:{fontSize:"34px",fontWeight:"700",color:"#1C1C1E",margin:0,letterSpacing:"-0.5px",lineHeight:"1.15"},children:"Your Groups"}),e.jsx("button",{onClick:()=>s(!0),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#007AFF",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{style:{fontSize:"24px"}})})]})}),e.jsxs("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",padding:"0 20px",paddingBottom:"100px"},children:[l&&o.length===0&&e.jsx("div",{children:[1,2,3,4].map(n=>e.jsxs("div",{style:{background:"#FFF",borderRadius:"16px",padding:"16px",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(f,{width:"48px",height:"48px",borderRadius:"50%"}),e.jsxs("div",{style:{flex:1},children:[e.jsx(f,{width:"55%",height:"18px",style:{marginBottom:"6px"}}),e.jsx(f,{width:"70%",height:"13px"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"14px"},children:[e.jsx(f,{width:"80px",height:"28px",borderRadius:"14px"}),e.jsxs("div",{children:[e.jsx(f,{width:"70px",height:"13px",style:{marginBottom:"4px",marginLeft:"auto"}}),e.jsx(f,{width:"50px",height:"18px",style:{marginLeft:"auto"}})]})]})]},n))}),!l&&o.length===0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"80px 20px",textAlign:"center"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#E5E5EA",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px"},children:e.jsx(z,{style:{fontSize:"36px",color:"#8E8E93"}})}),e.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1C1C1E",marginBottom:"8px"},children:"No groups yet"}),e.jsx("p",{style:{fontSize:"15px",color:"#8E8E93",marginBottom:"32px",lineHeight:"1.5"},children:"Create a group to start splitting expenses with your friends."}),e.jsx("button",{onClick:()=>h("/get-started"),style:{background:"#007AFF",color:"white",fontSize:"17px",fontWeight:"600",padding:"14px 40px",borderRadius:"14px",border:"none",cursor:"pointer",transition:"transform 120ms ease-out"},children:"Create Group"})]}),x.length>0&&e.jsx("div",{children:x.map(n=>e.jsx(B,{group:n,currSymbol:u,onClick:()=>g(n._id)},n._id))}),i&&x.length===0&&o.length>0&&e.jsx("div",{style:{textAlign:"center",padding:"60px 20px"},children:e.jsxs("p",{style:{fontSize:"17px",color:"#8E8E93",fontWeight:"500"},children:['No groups matching "',i,'"']})})]}),e.jsx("button",{onClick:()=>h("/get-started"),style:{position:"fixed",bottom:"calc(76px + env(safe-area-inset-bottom, 0px))",right:"max(20px, calc((100vw - 430px) / 2 + 20px))",width:"56px",height:"56px",borderRadius:"50%",background:"#007AFF",color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px",fontWeight:"300",boxShadow:"0 4px 14px rgba(0,122,255,0.35)",transition:"transform 120ms ease-out",zIndex:99},children:e.jsx("span",{style:{lineHeight:1},children:"+"})}),e.jsx(I,{})]})}export{D as default};
