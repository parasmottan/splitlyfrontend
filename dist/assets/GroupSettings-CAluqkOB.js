import{b as M,u as A,a as E,r as l,j as e}from"./index-D2hiQaAV.js";import{a as L}from"./index-B02zu7Fg.js";import{c as T}from"./index-DwI296of.js";import{u as _}from"./groupStore-DTKMQI9u.js";import{A as j}from"./Avatar-CKEBuCLQ.js";import{M as f}from"./Modal-KTUvGfvR.js";function V(){var m,h,u,g,v,y;const{id:a}=M(),o=A(),{activeGroup:i,fetchGroup:b,archiveGroup:w,deleteGroup:N,leaveGroup:C}=_(),{user:t}=E(),[S,c]=l.useState(!1),[k,d]=l.useState(!1),[G,x]=l.useState(!1);if(l.useEffect(()=>{(!i||i._id!==a)&&b(a)},[a]),!i)return e.jsx("div",{className:"page",children:e.jsx("div",{className:"loading-center",children:e.jsx("div",{className:"spinner"})})});const s=i,p=((m=s.owner)==null?void 0:m._id)===(t==null?void 0:t._id),D=async()=>{try{await navigator.clipboard.writeText(s.inviteCode),x(!0),setTimeout(()=>x(!1),2e3)}catch{}},z=async()=>{try{await w(a),o("/groups",{replace:!0})}catch{}},B=async()=>{try{await N(a),o("/groups",{replace:!0})}catch{}},I=async()=>{try{await C(a),o("/groups",{replace:!0})}catch{}};return e.jsxs("div",{className:"page page-white",style:{padding:"0 20px"},children:[e.jsxs("div",{className:"header",children:[e.jsxs("button",{className:"header-back",onClick:()=>o(-1),children:[e.jsx(L,{})," Back"]}),e.jsx("span",{className:"header-title",children:"Group Settings"}),e.jsx("div",{style:{width:"60px"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0 32px"},children:[e.jsx(j,{name:s.name,size:"xl"}),e.jsx("h2",{style:{fontSize:"22px",fontWeight:"700",marginTop:"12px"},children:s.name}),e.jsxs("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:[((h=s.type)==null?void 0:h.charAt(0).toUpperCase())+((u=s.type)==null?void 0:u.slice(1))," Â· ",(g=s.members)==null?void 0:g.length," member",((v=s.members)==null?void 0:v.length)!==1?"s":""]})]}),e.jsx("div",{className:"card",style:{padding:"16px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"INVITE CODE"}),e.jsx("p",{style:{fontSize:"24px",fontWeight:"700",letterSpacing:"4px"},children:s.inviteCode})]}),e.jsxs("button",{onClick:D,style:{padding:"10px 16px",background:"var(--blue-light)",borderRadius:"var(--radius-md)",color:"var(--blue)",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(T,{}),G?"Copied!":"Copy"]})]})}),e.jsxs("div",{className:"card",style:{padding:"0 16px",marginBottom:"16px"},children:[e.jsxs("div",{className:"form-row",children:[e.jsx("span",{className:"form-row-label",children:"Currency"}),e.jsxs("span",{className:"form-row-value",children:[s.currency," (",s.currencySymbol,")"]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("span",{className:"form-row-label",children:"Created"}),e.jsx("span",{className:"form-row-value",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsx("h3",{className:"caption",style:{marginBottom:"12px"},children:"MEMBERS"}),e.jsx("div",{className:"card",style:{padding:"0 16px",marginBottom:"32px"},children:(y=s.members)==null?void 0:y.map((r,W)=>{const n=r.user;return e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(j,{name:n.name,size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:"500",fontSize:"16px"},children:n._id===(t==null?void 0:t._id)?"You":n.name}),e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:n.email})]})]}),r.role==="owner"&&e.jsx("span",{className:"badge badge-blue",style:{fontSize:"11px"},children:"Owner"})]},n._id)})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",paddingBottom:"40px"},children:[p&&!s.archived&&e.jsx("button",{className:"btn-secondary",onClick:z,style:{color:"var(--orange)"},children:"Archive Group"}),p&&e.jsx("button",{className:"btn-danger",onClick:()=>c(!0),children:"Delete Group"}),!p&&e.jsx("button",{className:"btn-danger",onClick:()=>d(!0),children:"Leave Group"})]}),e.jsx(f,{show:S,icon:"ðŸ—‘ï¸",title:"Delete Group?",message:"This will permanently delete the group and all expenses. This action cannot be undone.",onClose:()=>c(!1),children:e.jsx("div",{className:"modal-actions",children:e.jsxs("div",{className:"modal-actions-row",children:[e.jsx("button",{onClick:()=>c(!1),style:{background:"var(--gray-100)",color:"var(--text-primary)"},children:"Cancel"}),e.jsx("button",{onClick:B,style:{background:"var(--red)",color:"white"},children:"Delete"})]})})}),e.jsx(f,{show:k,icon:"ðŸ‘‹",title:"Leave Group?",message:"You'll lose access to this group and its expenses. You can join again with the invite code.",onClose:()=>d(!1),children:e.jsx("div",{className:"modal-actions",children:e.jsxs("div",{className:"modal-actions-row",children:[e.jsx("button",{onClick:()=>d(!1),style:{background:"var(--gray-100)",color:"var(--text-primary)"},children:"Cancel"}),e.jsx("button",{onClick:I,style:{background:"var(--red)",color:"white"},children:"Leave"})]})})})]})}export{V as default};
