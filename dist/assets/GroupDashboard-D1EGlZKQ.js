import{b as B,u as A,a as $,r as z,j as e}from"./index-D2hiQaAV.js";import{a as I,b as O,c as W}from"./index-B02zu7Fg.js";import{d as _,e as F}from"./index-DwI296of.js";import{u as T}from"./groupStore-DTKMQI9u.js";import{A as G}from"./Avatar-CKEBuCLQ.js";const R={food:"ðŸ½ï¸",transport:"ðŸš—",groceries:"ðŸ›’",entertainment:"ðŸŽ¬",utilities:"ðŸ’¡",rent:"ðŸ ",travel:"âœˆï¸",shopping:"ðŸ›ï¸",other:"ðŸ“‹"};function H(){var m,y,h,f,g,u;const{id:c}=B(),x=A(),{activeGroup:p,loading:N,fetchGroup:C}=T(),{user:n}=$(),[d,k]=z.useState("expenses");if(z.useEffect(()=>{C(c)},[c]),N&&!p)return e.jsx("div",{className:"page",children:e.jsx("div",{className:"loading-center",children:e.jsx("div",{className:"spinner"})})});if(!p)return e.jsx("div",{className:"page",children:e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"Group not found"})})});const s=p,r=s.currencySymbol||"â‚¹";return e.jsxs("div",{className:"page",style:{background:"var(--gray-50)",paddingBottom:"32px"},children:[e.jsxs("div",{className:"header",children:[e.jsxs("button",{className:"header-back",onClick:()=>x("/groups"),children:[e.jsx(I,{})," Groups"]}),e.jsx("span",{className:"header-title",children:s.name}),e.jsx("button",{className:"header-action",onClick:()=>x(`/groups/${c}/settings`),children:e.jsx(O,{style:{fontSize:"22px"}})})]}),e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"2px"},children:"You owe"}),e.jsxs("p",{style:{fontSize:"22px",fontWeight:"700",color:((m=s.balance)==null?void 0:m.youOwe)>0?"var(--red)":"var(--text-tertiary)"},children:[r,(((y=s.balance)==null?void 0:y.youOwe)||0).toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"2px"},children:"You're owed"}),e.jsxs("p",{style:{fontSize:"22px",fontWeight:"700",color:((h=s.balance)==null?void 0:h.youAreOwed)>0?"var(--green)":"var(--text-tertiary)"},children:[r,(((f=s.balance)==null?void 0:f.youAreOwed)||0).toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid var(--gray-100)"},children:[e.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"Total spend"}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:[r,(((g=s.balance)==null?void 0:g.totalSpend)||0).toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px"},children:[e.jsxs("button",{className:"btn-primary",style:{flex:1,padding:"14px",gap:"8px",borderRadius:"var(--radius-md)"},onClick:()=>x(`/groups/${c}/add-expense`),disabled:s.archived,children:[e.jsx(W,{style:{fontSize:"20px"}}),"Add Expense"]}),e.jsxs("button",{style:{flex:1,padding:"14px",background:"var(--white)",color:"var(--blue)",fontWeight:"600",fontSize:"15px",borderRadius:"var(--radius-md)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"var(--shadow-sm)",border:"none",cursor:"pointer"},onClick:()=>x(`/groups/${c}/settle`),disabled:s.archived,children:[e.jsx(_,{style:{fontSize:"20px"}}),"Settle Up"]})]}),e.jsx("div",{style:{display:"flex",marginBottom:"16px",background:"var(--gray-200)",borderRadius:"var(--radius-md)",padding:"2px"},children:["expenses","members"].map(t=>e.jsx("button",{onClick:()=>k(t),style:{flex:1,padding:"10px",background:d===t?"var(--white)":"transparent",borderRadius:d===t?"var(--radius-sm)":"0",color:d===t?"var(--text-primary)":"var(--text-secondary)",fontWeight:d===t?"600":"400",fontSize:"14px",border:"none",cursor:"pointer",boxShadow:d===t?"var(--shadow-sm)":"none",textTransform:"capitalize"},children:t},t))}),d==="expenses"&&e.jsx("div",{children:!s.expenses||s.expenses.length===0?e.jsxs("div",{className:"empty-state",style:{padding:"40px 20px"},children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(F,{})}),e.jsx("h3",{className:"empty-state-title",children:"No expenses yet"}),e.jsx("p",{className:"empty-state-text",children:"Add your first expense to get started."})]}):s.expenses.map(t=>{var v,j,b;const o=((v=t.paidBy)==null?void 0:v._id)===(n==null?void 0:n._id),i=(j=t.splits)==null?void 0:j.find(S=>{var w;return S.user===(n==null?void 0:n._id)||((w=S.user)==null?void 0:w._id)===(n==null?void 0:n._id)});let a,l;return o?(a=`+${r}${(t.amount-((i==null?void 0:i.amount)||0)).toFixed(2)}`,l="var(--green)"):i?(a=`-${r}${i.amount.toFixed(2)}`,l="var(--red)"):(a=`${r}0.00`,l="var(--text-secondary)"),e.jsx("div",{className:"card animate-fade-in",style:{marginBottom:"8px",padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"var(--gray-100)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:R[t.category]||"ðŸ“‹"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"600",fontSize:"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.description}),e.jsx("span",{style:{fontWeight:"600",fontSize:"16px",color:l,flexShrink:0,marginLeft:"8px"},children:a})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"},children:[e.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[o?"You paid":`${((b=t.paidBy)==null?void 0:b.name)||"Someone"} paid`," ",r,t.amount.toFixed(2)]}),e.jsx("span",{style:{fontSize:"12px",color:"var(--text-tertiary)"},children:new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short"})})]})]})]})},t._id)})}),d==="members"&&e.jsx("div",{children:(u=s.members)==null?void 0:u.map(t=>{var l;const o=t.user,i=(l=s.memberBalances)==null?void 0:l[o._id],a=(i==null?void 0:i.net)||0;return e.jsx("div",{className:"card",style:{marginBottom:"8px",padding:"14px 16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(G,{name:o.name,size:"sm"}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontWeight:"600",fontSize:"16px"},children:[o._id===(n==null?void 0:n._id)?"You":o.name,t.role==="owner"&&e.jsx("span",{style:{fontSize:"12px",color:"var(--blue)",marginLeft:"6px"},children:"Owner"})]}),e.jsx("span",{style:{fontWeight:"600",fontSize:"15px",color:a>0?"var(--green)":a<0?"var(--red)":"var(--text-secondary)"},children:a>0?`+${r}${a.toFixed(2)}`:a<0?`-${r}${Math.abs(a).toFixed(2)}`:"Settled"})]}),e.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["Paid: ",r,((i==null?void 0:i.paid)||0).toFixed(2)]})]})]})},o._id)})})]})}export{H as default};
