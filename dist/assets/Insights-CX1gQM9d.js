import{r as o,j as t,d as u}from"./index-D2hiQaAV.js";import{B as d}from"./BottomNav-dGRCUTNW.js";import"./index-DwI296of.js";import"./index-B02zu7Fg.js";const h=["#007AFF","#FF9500","#34C759","#FF3B30","#AF52DE","#FF2D55","#5856D6","#00C7BE","#FFCC00"];function B(){var c,x,p;const[e,g]=o.useState(null),[m,i]=o.useState(!0),[n,f]=o.useState("all"),l=async s=>{i(!0);try{const r=s&&s!=="all"?`/insights?groupId=${s}`:"/insights",{data:v}=await u.get(r);g(v)}catch(r){console.error(r)}i(!1)};o.useEffect(()=>{l()},[]);const a=s=>{f(s),l(s)};if(m&&!e)return t.jsxs("div",{className:"page",children:[t.jsx("div",{className:"loading-center",children:t.jsx("div",{className:"spinner"})}),t.jsx(d,{})]});const y=((c=e==null?void 0:e.categories)==null?void 0:c.length)>0?Math.max(...e.categories.map(s=>s.amount)):0;return t.jsxs("div",{className:"page",style:{background:"var(--gray-50)"},children:[t.jsx("div",{style:{padding:"16px 0 8px"},children:t.jsx("h1",{className:"title-large",children:"Insights"})}),((x=e==null?void 0:e.groupTabs)==null?void 0:x.length)>0&&t.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",marginBottom:"20px",paddingBottom:"4px"},children:[t.jsx("button",{onClick:()=>a("all"),style:{padding:"8px 16px",borderRadius:"var(--radius-full)",background:n==="all"?"var(--blue)":"var(--white)",color:n==="all"?"var(--white)":"var(--text-secondary)",fontWeight:"600",fontSize:"13px",border:"none",cursor:"pointer",whiteSpace:"nowrap",boxShadow:"var(--shadow-sm)"},children:"All"}),e.groupTabs.map(s=>t.jsx("button",{onClick:()=>a(s._id),style:{padding:"8px 16px",borderRadius:"var(--radius-full)",background:n===s._id?"var(--blue)":"var(--white)",color:n===s._id?"var(--white)":"var(--text-secondary)",fontWeight:"600",fontSize:"13px",border:"none",cursor:"pointer",whiteSpace:"nowrap",boxShadow:"var(--shadow-sm)"},children:s.name},s._id))]}),t.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"16px",textAlign:"center"},children:[t.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"16px"},children:"Fairness Score"}),t.jsxs("div",{style:{position:"relative",width:"120px",height:"120px",margin:"0 auto 16px"},children:[t.jsxs("svg",{viewBox:"0 0 120 120",style:{width:"120px",height:"120px",transform:"rotate(-90deg)"},children:[t.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"var(--gray-200)",strokeWidth:"10"}),t.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:(e==null?void 0:e.fairnessScore)>=80?"var(--green)":(e==null?void 0:e.fairnessScore)>=50?"var(--orange)":"var(--red)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${((e==null?void 0:e.fairnessScore)||0)*3.14} 314`})]}),t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:t.jsx("span",{style:{fontSize:"32px",fontWeight:"800"},children:(e==null?void 0:e.fairnessScore)||0})})]}),t.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:(e==null?void 0:e.fairnessScore)>=80?"Great balance!":(e==null?void 0:e.fairnessScore)>=50?"Could be fairer":"Unbalanced spending"})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[t.jsxs("div",{className:"card",style:{flex:1,padding:"16px",textAlign:"center"},children:[t.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"Total Spent"}),t.jsxs("p",{style:{fontSize:"22px",fontWeight:"700"},children:["₹",((e==null?void 0:e.totalSpent)||0).toFixed(0)]}),(e==null?void 0:e.monthChange)!==0&&t.jsxs("span",{style:{fontSize:"12px",color:(e==null?void 0:e.monthChange)>0?"var(--red)":"var(--green)",fontWeight:"600"},children:[(e==null?void 0:e.monthChange)>0?"↑":"↓",Math.abs(e==null?void 0:e.monthChange),"% vs last month"]})]}),t.jsxs("div",{className:"card",style:{flex:1,padding:"16px",textAlign:"center"},children:[t.jsx("p",{style:{fontSize:"12px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"Your Share"}),t.jsxs("p",{style:{fontSize:"22px",fontWeight:"700"},children:["₹",((e==null?void 0:e.yourShare)||0).toFixed(0)]}),t.jsxs("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[(e==null?void 0:e.sharePercentage)||0,"% of total"]})]})]}),((p=e==null?void 0:e.categories)==null?void 0:p.length)>0&&t.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px"},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Spending by Category"}),e.categories.map((s,r)=>t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[t.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:s.name}),t.jsxs("span",{style:{fontSize:"14px",fontWeight:"600"},children:["₹",s.amount.toFixed(0)]})]}),t.jsx("div",{style:{height:"8px",background:"var(--gray-100)",borderRadius:"4px",overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${s.amount/y*100}%`,background:h[r%h.length],borderRadius:"4px",transition:"width 0.5s ease"}})})]},s.name))]}),t.jsx(d,{})]})}export{B as default};
