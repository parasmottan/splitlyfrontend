import{u as f,r as s,j as e,R as j}from"./index-CJ3aYF7-.js";import{a as v}from"./index-DgwPC8f5.js";import{c as b}from"./index-DYB0KXf4.js";import{u as k}from"./groupStore-DKf8PMM7.js";function R(){const c=f(),{joinGroup:g,loading:l}=k(),[o,p]=s.useState(["","","","","",""]),i=s.useRef([]),[d,a]=s.useState(""),h=(r,t)=>{var x;t.length>1&&(t=t.slice(-1));const n=[...o];n[r]=t.toUpperCase(),p(n),a(""),t&&r<5&&((x=i.current[r+1])==null||x.focus())},u=(r,t)=>{var n;t.key==="Backspace"&&!o[r]&&r>0&&((n=i.current[r-1])==null||n.focus())},m=async()=>{try{const t=(await navigator.clipboard.readText()).match(/[A-Z0-9]{6}/i);if(t){const n=t[0].toUpperCase().split("");p(n),a("")}}catch{}},y=async()=>{const r=o.join("");if(r.length!==6){a("Please enter a 6-digit code");return}try{const t=await g(r);c(`/groups/${t._id}`,{replace:!0})}catch(t){a(t.message)}};return e.jsxs("div",{className:"page page-white",style:{padding:"0 20px",minHeight:"100dvh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"header",children:[e.jsxs("button",{className:"header-back",onClick:()=>c(-1),children:[e.jsx(v,{style:{fontSize:"20px"}})," Back"]}),e.jsx("span",{className:"header-title",children:"Join Group"}),e.jsx("div",{style:{width:"60px"}})]}),e.jsx("h1",{className:"title-large",style:{textAlign:"center",marginTop:"24px",marginBottom:"12px"},children:"Enter Invite Code"}),e.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"17px",lineHeight:"1.5",marginBottom:"32px",maxWidth:"300px",margin:"0 auto 32px"},children:"Ask your friend for the 6-digit code to join their group."}),e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center",marginBottom:"8px",padding:"16px",background:"var(--gray-50)",borderRadius:"16px",border:"2px solid var(--blue-light)"},children:o.map((r,t)=>e.jsxs(j.Fragment,{children:[e.jsx("input",{ref:n=>i.current[t]=n,type:"text",maxLength:1,value:r,onChange:n=>h(t,n.target.value),onKeyDown:n=>u(t,n),style:{width:"36px",height:"44px",textAlign:"center",fontSize:"24px",fontWeight:"600",border:"none",borderBottom:`2px solid ${r?"var(--blue)":"var(--gray-300)"}`,background:"transparent",color:"var(--text-primary)",letterSpacing:"2px",outline:"none",transition:"border-color 200ms ease"}}),t===2&&e.jsx("div",{style:{width:"2px",height:"44px",background:"var(--gray-300)",margin:"0 4px",alignSelf:"center"}})]},t))}),d&&e.jsx("p",{style:{textAlign:"center",color:"var(--red)",fontSize:"15px",marginTop:"8px"},children:d}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",margin:"24px 0"},children:[e.jsx("div",{style:{flex:1,height:"0.5px",background:"var(--gray-300)"}}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px",fontWeight:"500"},children:"OR"}),e.jsx("div",{style:{flex:1,height:"0.5px",background:"var(--gray-300)"}})]}),e.jsxs("button",{onClick:m,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"14px",background:"var(--gray-50)",borderRadius:"16px",border:"none",color:"var(--blue)",fontSize:"17px",fontWeight:"600",cursor:"pointer",transition:"transform 120ms ease-out"},children:[e.jsx(b,{style:{fontSize:"20px"}}),"Paste Invite Link"]}),e.jsx("div",{style:{flex:1}}),e.jsx("button",{className:"btn-primary",onClick:y,disabled:l||o.join("").length!==6,style:{marginBottom:"32px"},children:l?"Joining...":"Join Group"})]})}export{R as default};
