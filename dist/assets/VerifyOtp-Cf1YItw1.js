import{u as N,e as z,a as A,r as s,j as r}from"./index-D9jaU1zW.js";import{e as V}from"./index-CSbZRpxs.js";function L(){const p=N(),y=z(),{verifyOtp:v,resendOtp:b,error:g,clearError:j}=A(),{name:S,email:l,password:w}=y.state||{},[a,u]=s.useState(["","","","","",""]),[d,f]=s.useState(300),[x,h]=s.useState(!1),[R,m]=s.useState(!1),o=s.useRef([]);s.useEffect(()=>{l||p("/register",{replace:!0})},[l,p]),s.useEffect(()=>{const t=setInterval(()=>{f(e=>e>0?e-1:0)},1e3);return()=>clearInterval(t)},[]);const C=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},D=(t,e)=>{const n=t.target.value;if(isNaN(n))return;const i=[...a];i[e]=n.substring(n.length-1),u(i),n&&e<5&&o.current[e+1].focus()},k=(t,e)=>{t.key==="Backspace"&&!a[e]&&e>0&&o.current[e-1].focus()},B=t=>{var n;t.preventDefault();const e=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);if(e.length>0){const i=[...a];for(let c=0;c<e.length;c++)i[c]=e[c];u(i);const I=Math.min(e.length,5);(n=o.current[I])==null||n.focus()}},O=async t=>{t.preventDefault();const e=a.join("");if(!(e.length<6)){h(!0);try{await v(S,l,w,e),p("/groups",{replace:!0})}catch{}h(!1)}},E=async()=>{if(!(d>0)){m(!0);try{await b(l),f(300),u(["","","","","",""]),o.current[0].focus()}catch{}m(!1)}};return r.jsxs("div",{className:"page page-white",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100dvh",padding:"40px 20px"},children:[r.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--gray-100)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"32px"},children:r.jsx(V,{style:{fontSize:"32px",color:"var(--blue)"}})}),r.jsx("h1",{className:"title-large",style:{marginBottom:"8px",textAlign:"center"},children:"Verify Email"}),r.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"15px",textAlign:"center",marginBottom:"40px",maxWidth:"280px",lineHeight:"1.5"},children:"We've sent a 6-digit code to your email."}),g&&r.jsx("div",{style:{background:"var(--red-light)",color:"var(--red)",padding:"12px 16px",borderRadius:"12px",marginBottom:"32px",fontSize:"15px",width:"100%"},children:g}),r.jsxs("form",{onSubmit:O,style:{width:"100%"},children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"32px"},children:a.map((t,e)=>r.jsx("input",{ref:n=>o.current[e]=n,type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:n=>{D(n,e),j()},onKeyDown:n=>k(n,e),onPaste:e===0?B:void 0,style:{width:"48px",height:"56px",borderRadius:"12px",border:t?"2px solid var(--blue)":"1.5px solid var(--gray-300)",background:t?"var(--white)":"var(--gray-50)",fontSize:"22px",fontWeight:"700",textAlign:"center",outline:"none",transition:"border-color 200ms ease, box-shadow 200ms ease, background 200ms ease",boxShadow:t?"0 0 0 3px rgba(0, 122, 255, 0.08)":"none"}},e))}),r.jsx("p",{style:{textAlign:"center",marginBottom:"40px",fontSize:"15px",color:"var(--text-secondary)"},children:d>0?r.jsxs("span",{children:["Resend code in ",r.jsx("span",{style:{color:"var(--text-primary)",fontWeight:"600"},children:C(d)})]}):r.jsx("span",{style:{color:"var(--blue)",fontWeight:"600",cursor:"pointer"},onClick:E,children:R?"Resending...":"Resend Code"})}),r.jsx("button",{className:"btn-primary",type:"submit",disabled:x||a.join("").length<6,children:x?"Verifying...":"Verify & Continue"})]})]})}export{L as default};
