import{r as o,j as e,d as S}from"./index-DNKDXbwY.js";import{B as g}from"./BottomNav-HApZ-xSH.js";import{S as i}from"./Skeleton-Des0Eng2.js";import"./index-UWMBKVSd.js";import"./index-BGOQgUEA.js";const m=["#007AFF","#FF9500","#34C759","#FF3B30","#AF52DE","#FF2D55","#5856D6","#00C7BE","#FFCC00"];function F(){var h,d,c;const[t,y]=o.useState(null),[f,x]=o.useState(!0),[n,u]=o.useState("all"),l=async s=>{x(!0);try{const r=s&&s!=="all"?`/insights?groupId=${s}`:"/insights",{data:v}=await S.get(r);y(v)}catch(r){console.error(r)}x(!1)};o.useEffect(()=>{l()},[]);const p=s=>{u(s),l(s)};if(f&&!t)return e.jsxs("div",{className:"page",style:{background:"var(--gray-50)"},children:[e.jsx("div",{style:{padding:"16px 0 8px"},children:e.jsx(i,{width:"120px",height:"34px",style:{marginBottom:"8px"}})}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"20px"},children:[1,2,3].map(s=>e.jsx(i,{width:"60px",height:"32px",borderRadius:"9999px"},s))}),e.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"16px",textAlign:"center"},children:[e.jsx(i,{width:"80px",height:"13px",style:{margin:"0 auto 16px"}}),e.jsx(i,{width:"120px",height:"120px",borderRadius:"50%",style:{margin:"0 auto 16px"}}),e.jsx(i,{width:"140px",height:"14px",style:{margin:"0 auto"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[e.jsxs("div",{className:"card",style:{flex:1,padding:"16px"},children:[e.jsx(i,{width:"60px",height:"12px",style:{margin:"0 auto 8px"}}),e.jsx(i,{width:"80px",height:"22px",style:{margin:"0 auto 6px"}}),e.jsx(i,{width:"100px",height:"12px",style:{margin:"0 auto"}})]}),e.jsxs("div",{className:"card",style:{flex:1,padding:"16px"},children:[e.jsx(i,{width:"60px",height:"12px",style:{margin:"0 auto 8px"}}),e.jsx(i,{width:"80px",height:"22px",style:{margin:"0 auto 6px"}}),e.jsx(i,{width:"100px",height:"12px",style:{margin:"0 auto"}})]})]}),e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px"},children:[e.jsx(i,{width:"140px",height:"16px",style:{marginBottom:"20px"}}),[1,2,3].map(s=>e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx(i,{width:"60px",height:"14px"}),e.jsx(i,{width:"50px",height:"14px"})]}),e.jsx(i,{width:"100%",height:"8px",borderRadius:"4px"})]},s))]}),e.jsx(g,{})]});const j=((h=t==null?void 0:t.categories)==null?void 0:h.length)>0?Math.max(...t.categories.map(s=>s.amount)):0,a="₹";return e.jsxs("div",{className:"page",style:{background:"var(--gray-50)"},children:[e.jsx("div",{style:{padding:"16px 0 8px"},children:e.jsx("h1",{className:"title-large",children:"Insights"})}),((d=t==null?void 0:t.groupTabs)==null?void 0:d.length)>0&&e.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",marginBottom:"20px",paddingBottom:"4px",WebkitOverflowScrolling:"touch"},children:[e.jsx("button",{onClick:()=>p("all"),style:{padding:"8px 16px",borderRadius:"9999px",background:n==="all"?"var(--blue)":"var(--white)",color:n==="all"?"var(--white)":"var(--text-secondary)",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",whiteSpace:"nowrap",boxShadow:"var(--shadow-sm)",transition:"transform 120ms ease-out"},children:"All"}),t.groupTabs.map(s=>e.jsx("button",{onClick:()=>p(s._id),style:{padding:"8px 16px",borderRadius:"9999px",background:n===s._id?"var(--blue)":"var(--white)",color:n===s._id?"var(--white)":"var(--text-secondary)",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",whiteSpace:"nowrap",boxShadow:"var(--shadow-sm)",transition:"transform 120ms ease-out"},children:s.name},s._id))]}),e.jsxs("div",{className:"card",style:{padding:"24px",marginBottom:"16px",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"16px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Fairness Score"}),e.jsxs("div",{style:{position:"relative",width:"120px",height:"120px",margin:"0 auto 16px"},children:[e.jsxs("svg",{viewBox:"0 0 120 120",style:{width:"120px",height:"120px",transform:"rotate(-90deg)"},children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"var(--gray-200)",strokeWidth:"10"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:(t==null?void 0:t.fairnessScore)>=80?"var(--green)":(t==null?void 0:t.fairnessScore)>=50?"var(--orange)":"var(--red)",strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${((t==null?void 0:t.fairnessScore)||0)*3.14} 314`,style:{transition:"stroke-dasharray 500ms ease-out"}})]}),e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsx("span",{style:{fontSize:"32px",fontWeight:"700"},children:(t==null?void 0:t.fairnessScore)||0})})]}),e.jsx("p",{style:{fontSize:"15px",color:"var(--text-secondary)"},children:(t==null?void 0:t.fairnessScore)>=80?"Great balance!":(t==null?void 0:t.fairnessScore)>=50?"Could be fairer":"Unbalanced spending"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"16px"},children:[e.jsxs("div",{className:"card",style:{flex:1,padding:"16px",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"Total Spent"}),e.jsxs("p",{style:{fontSize:"22px",fontWeight:"700"},children:[a,((t==null?void 0:t.totalSpent)||0).toFixed(0)]}),(t==null?void 0:t.monthChange)!==0&&e.jsxs("span",{style:{fontSize:"13px",color:(t==null?void 0:t.monthChange)>0?"var(--red)":"var(--green)",fontWeight:"600"},children:[(t==null?void 0:t.monthChange)>0?"↑":"↓",Math.abs(t==null?void 0:t.monthChange),"% vs last month"]})]}),e.jsxs("div",{className:"card",style:{flex:1,padding:"16px",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"Your Share"}),e.jsxs("p",{style:{fontSize:"22px",fontWeight:"700"},children:[a,((t==null?void 0:t.yourShare)||0).toFixed(0)]}),e.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[(t==null?void 0:t.sharePercentage)||0,"% of total"]})]})]}),((c=t==null?void 0:t.categories)==null?void 0:c.length)>0&&e.jsxs("div",{className:"card",style:{padding:"20px",marginBottom:"16px"},children:[e.jsx("h3",{style:{fontSize:"17px",fontWeight:"600",marginBottom:"16px"},children:"Spending by Category"}),t.categories.map((s,r)=>e.jsxs("div",{style:{marginBottom:r<t.categories.length-1?"16px":"0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"15px",fontWeight:"500"},children:s.name}),e.jsxs("span",{style:{fontSize:"15px",fontWeight:"600"},children:[a,s.amount.toFixed(0)]})]}),e.jsx("div",{style:{height:"8px",background:"var(--gray-100)",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${s.amount/j*100}%`,background:m[r%m.length],borderRadius:"4px",transition:"width 500ms ease-out"}})})]},s.name))]}),e.jsx(g,{})]})}export{F as default};
