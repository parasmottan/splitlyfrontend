import{u as f,r as s,j as e,R as j}from"./index-D2hiQaAV.js";import{a as v}from"./index-B02zu7Fg.js";import{c as b}from"./index-DwI296of.js";import{u as k}from"./groupStore-DTKMQI9u.js";function N(){const c=f(),{joinGroup:g,loading:l,error:C}=k(),[a,p]=s.useState(["","","","","",""]),i=s.useRef([]),[d,o]=s.useState(""),h=(r,t)=>{var x;t.length>1&&(t=t.slice(-1));const n=[...a];n[r]=t.toUpperCase(),p(n),o(""),t&&r<5&&((x=i.current[r+1])==null||x.focus())},u=(r,t)=>{var n;t.key==="Backspace"&&!a[r]&&r>0&&((n=i.current[r-1])==null||n.focus())},m=async()=>{try{const t=(await navigator.clipboard.readText()).match(/[A-Z0-9]{6}/i);if(t){const n=t[0].toUpperCase().split("");p(n),o("")}}catch{}},y=async()=>{const r=a.join("");if(r.length!==6){o("Please enter a 6-digit code");return}try{const t=await g(r);c(`/groups/${t._id}`,{replace:!0})}catch(t){o(t.message)}};return e.jsxs("div",{className:"page page-white",style:{padding:"0 20px",minHeight:"100dvh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"header",children:[e.jsxs("button",{className:"header-back",onClick:()=>c(-1),children:[e.jsx(v,{})," Back"]}),e.jsx("span",{className:"header-title",children:"Join Group"}),e.jsx("div",{style:{width:"60px"}})]}),e.jsx("h1",{className:"title-large",style:{textAlign:"center",marginTop:"24px",marginBottom:"12px"},children:"Enter Invite Code"}),e.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",fontSize:"16px",lineHeight:"1.5",marginBottom:"32px",maxWidth:"300px",margin:"0 auto 32px"},children:"Ask your friend for the 6-digit code to join their group."}),e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center",marginBottom:"8px",padding:"16px",background:"var(--gray-50)",borderRadius:"var(--radius-lg)",border:"2px solid var(--blue-light)"},children:a.map((r,t)=>e.jsxs(j.Fragment,{children:[e.jsx("input",{ref:n=>i.current[t]=n,type:"text",maxLength:1,value:r,onChange:n=>h(t,n.target.value),onKeyDown:n=>u(t,n),style:{width:"36px",height:"44px",textAlign:"center",fontSize:"24px",fontWeight:"600",border:"none",borderBottom:"2px solid var(--gray-300)",background:"transparent",color:"var(--text-primary)",letterSpacing:"2px"}}),t===2&&e.jsx("div",{style:{width:"2px",height:"44px",background:"var(--gray-300)",margin:"0 4px",alignSelf:"center"}})]},t))}),d&&e.jsx("p",{style:{textAlign:"center",color:"var(--red)",fontSize:"14px",marginTop:"8px"},children:d}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",margin:"24px 0"},children:[e.jsx("div",{style:{flex:1,height:"1px",background:"var(--gray-200)"}}),e.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:"OR"}),e.jsx("div",{style:{flex:1,height:"1px",background:"var(--gray-200)"}})]}),e.jsxs("button",{onClick:m,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"14px",background:"var(--gray-50)",borderRadius:"var(--radius-lg)",border:"none",color:"var(--blue)",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:[e.jsx(b,{style:{fontSize:"20px"}}),"Paste Invite Link"]}),e.jsx("div",{style:{flex:1}}),e.jsx("button",{className:"btn-primary",onClick:y,disabled:l||a.join("").length!==6,style:{marginBottom:"32px"},children:l?"Joining...":"Join Group"})]})}export{N as default};
