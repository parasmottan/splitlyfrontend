import{u as g,a as v,r as u,j as e}from"./index-D2hiQaAV.js";import{I as b}from"./index-B02zu7Fg.js";import{u as w}from"./groupStore-DTKMQI9u.js";import{A as j}from"./Avatar-CKEBuCLQ.js";import{B as N}from"./BottomNav-dGRCUTNW.js";import"./index-DwI296of.js";function W(){const i=g(),{groups:r,loading:l,fetchGroups:f}=w(),{user:S}=v();u.useEffect(()=>{f()},[]);const n=r.filter(t=>!t.archived),o=r.filter(t=>t.archived);return e.jsxs("div",{className:"page",style:{background:"var(--gray-50)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 0 4px"},children:[e.jsx("h1",{className:"title-large",children:"Groups"}),e.jsx("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:e.jsx("button",{onClick:()=>i("/get-started"),style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx("div",{style:{width:"36px",height:"36px",background:"var(--gray-200)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"+"})})})]}),n.length>0&&e.jsx("div",{className:"card",style:{marginTop:"16px",marginBottom:"20px",padding:"20px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"You owe"}),e.jsxs("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--red)"},children:["â‚¹",n.reduce((t,a)=>{var s;return t+(((s=a.balance)==null?void 0:s.youOwe)||0)},0).toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500",marginBottom:"4px"},children:"You're owed"}),e.jsxs("p",{style:{fontSize:"24px",fontWeight:"700",color:"var(--green)"},children:["â‚¹",n.reduce((t,a)=>{var s;return t+(((s=a.balance)==null?void 0:s.youAreOwed)||0)},0).toFixed(2)]})]})]})}),l&&r.length===0&&e.jsx("div",{className:"loading-center",children:e.jsx("div",{className:"spinner"})}),!l&&n.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"ðŸ‘¥"}),e.jsx("h3",{className:"empty-state-title",children:"No groups yet"}),e.jsx("p",{className:"empty-state-text",children:"Create or join a group to start splitting expenses."}),e.jsx("button",{className:"btn-primary",style:{maxWidth:"240px"},onClick:()=>i("/get-started"),children:"Get Started"})]}),n.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"caption",style:{marginBottom:"12px"},children:"ACTIVE"}),n.map(t=>{var a,s,d,c,x,p,h,m,y;return e.jsx("div",{className:"card animate-fade-in",style:{marginBottom:"12px",padding:"16px",cursor:"pointer"},onClick:()=>i(`/groups/${t._id}`),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(j,{name:t.name}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h4",{style:{fontSize:"17px",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),e.jsx(b,{style:{fontSize:"18px",color:"var(--gray-400)",flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"4px"},children:[e.jsxs("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[((a=t.members)==null?void 0:a.length)||0," member",(((s=t.members)==null?void 0:s.length)||0)!==1?"s":""]}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:((d=t.balance)==null?void 0:d.youOwe)>0?"var(--red)":((c=t.balance)==null?void 0:c.youAreOwed)>0?"var(--green)":"var(--text-secondary)"},children:[((x=t.balance)==null?void 0:x.youOwe)>0&&`You owe â‚¹${t.balance.youOwe.toFixed(2)}`,((p=t.balance)==null?void 0:p.youAreOwed)>0&&`Owed â‚¹${t.balance.youAreOwed.toFixed(2)}`,!((h=t.balance)!=null&&h.youOwe)&&!((m=t.balance)!=null&&m.youAreOwed)&&((y=t.balance)!=null&&y.isSettled?"âœ“ Settled":"No expenses")]})]})]})]})},t._id)})]}),o.length>0&&e.jsxs("div",{style:{marginTop:"24px"},children:[e.jsx("h3",{className:"caption",style:{marginBottom:"12px"},children:"ARCHIVED"}),o.map(t=>e.jsx("div",{className:"card",style:{marginBottom:"12px",padding:"16px",opacity:.6,cursor:"pointer"},onClick:()=>i(`/groups/${t._id}`),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(j,{name:t.name}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{fontSize:"17px",fontWeight:"600"},children:t.name}),e.jsx("span",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:"Archived"})]})]})},t._id))]}),e.jsx(N,{})]})}export{W as default};
