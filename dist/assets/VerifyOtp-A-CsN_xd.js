import{u as O,e as H,a as I,r as a,j as r}from"./index-DPogj0TL.js";function T(){const p=O(),S=H(),{verifyOtp:D,resendOtp:C,error:h,clearError:b}=I(),{name:k,email:s,password:w}=S.state||{},o=6,[i,u]=a.useState(Array(o).fill("")),[x,y]=a.useState(60),[f,m]=a.useState(!1),[j,v]=a.useState(!1),l=a.useRef([]);a.useEffect(()=>{s||p("/register",{replace:!0})},[s,p]),a.useEffect(()=>{const e=setInterval(()=>{y(t=>t>0?t-1:0)},1e3);return()=>clearInterval(e)},[]);const F=(e,t)=>{const n=e.target.value.replace(/\D/g,"");if(!n&&e.target.value)return;const c=[...i];c[t]=n.substring(n.length-1),u(c),n&&t<o-1&&l.current[t+1].focus()},R=(e,t)=>{e.key==="Backspace"&&!i[t]&&t>0&&l.current[t-1].focus()},E=e=>{var n;e.preventDefault();const t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,o);if(t.length>0){const c=Array(o).fill("");for(let d=0;d<t.length;d++)c[d]=t[d];u(c);const W=Math.min(t.length,o-1);(n=l.current[W])==null||n.focus()}},A=async e=>{e.preventDefault();const t=i.join("");if(!(t.length<o)){m(!0);try{await D(k,s,w,t),p("/groups",{replace:!0})}catch{}m(!1)}},B=async()=>{var e;if(!(x>0)){v(!0),b();try{await C(s),y(60),u(Array(o).fill("")),(e=l.current[0])==null||e.focus()}catch{}v(!1)}},z=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,g=i.every(e=>e!=="");return r.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100dvh",background:"linear-gradient(155deg, #EBEDff 0%, #D9E0FF 30%, #C8D6FF 60%, #DDE6F8 100%)"},children:[r.jsx("button",{onClick:()=>p(-1),style:{position:"absolute",top:"52px",left:"24px",width:"36px",height:"36px",borderRadius:"50%",background:"rgba(255,255,255,0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",color:"#111827",cursor:"pointer"},children:"â†"}),r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"100px 28px 0"},children:[r.jsx("h1",{style:{fontSize:"34px",fontWeight:"800",marginBottom:"12px",color:"#0F1130",letterSpacing:"-0.8px",lineHeight:"1.1"},children:"Check your inbox ðŸ’Œ"}),r.jsx("p",{style:{color:"#555875",fontSize:"16px",fontWeight:"400",marginBottom:"8px",lineHeight:"1.5"},children:"We sent a 6-digit code to"}),r.jsx("p",{style:{color:"#0F1130",fontSize:"16px",fontWeight:"700",marginBottom:"40px"},children:s}),h&&r.jsx("div",{style:{background:"rgba(255,59,48,0.1)",color:"#DC2626",padding:"14px 16px",borderRadius:"16px",marginBottom:"24px",fontSize:"15px",border:"1px solid rgba(220,38,38,0.2)"},children:h}),r.jsxs("form",{onSubmit:A,children:[r.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px",marginBottom:"28px"},children:i.map((e,t)=>r.jsx("input",{ref:n=>l.current[t]=n,type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:n=>{F(n,t),b()},onKeyDown:n=>R(n,t),onPaste:t===0?E:void 0,style:{width:"46px",height:"58px",borderRadius:"16px",border:e?"2.5px solid rgba(99,71,245,0.7)":"2px solid rgba(255,255,255,0.7)",background:e?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.45)",backdropFilter:"blur(12px)",fontSize:"24px",fontWeight:"700",color:e?"#6347F5":"#9CA3AF",textAlign:"center",outline:"none",boxShadow:e?"0 4px 16px rgba(99,71,245,0.15)":"0 2px 8px rgba(0,0,0,0.04)",transition:"all 200ms ease",WebkitAppearance:"none"}},t))}),r.jsx("p",{style:{textAlign:"center",marginBottom:"36px",fontSize:"15px",fontWeight:"600"},children:x>0?r.jsxs("span",{style:{color:"#555875"},children:["Resend code in ",r.jsx("span",{style:{color:"var(--blue)"},children:z(x)})]}):r.jsx("span",{style:{color:"var(--blue)",cursor:j?"default":"pointer"},onClick:B,children:j?"Resending...":"Resend Code"})}),r.jsx("button",{type:"submit",disabled:f||!g,style:{width:"100%",padding:"18px 24px",background:"linear-gradient(135deg, #6347F5 0%, #4B32CC 100%)",color:"white",fontSize:"17px",fontWeight:"700",borderRadius:"100px",border:"none",cursor:g?"pointer":"default",boxShadow:"0 8px 24px rgba(99,71,245,0.35)",opacity:f||!g?.5:1,transition:"opacity 200ms"},children:f?"Verifying...":"Verify & Enter â†’"})]})]})]})}export{T as default};
