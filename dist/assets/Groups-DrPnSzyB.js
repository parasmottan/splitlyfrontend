import{u as E,a as k,r as d,j as e}from"./index-B3lqKPvk.js";import{b as C}from"./index-BJ7B7Yjc.js";import{u as z}from"./groupStore-BYNz21HU.js";import{A as j}from"./Avatar-yNoXF_l8.js";import{B as A}from"./BottomNav-DIlQ7RtU.js";import{S as v}from"./Skeleton-D7zNthvj.js";import"./index-CCTur-5o.js";const W=d.memo(function({members:i,max:x=3}){const c=(i==null?void 0:i.slice(0,x))||[],o=((i==null?void 0:i.length)||0)-x;return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.map((f,r)=>{var n,h;return e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:"2px solid white",marginLeft:r===0?0:"-7px",zIndex:x-r,position:"relative",overflow:"hidden",flexShrink:0},children:e.jsx(j,{name:((n=f.user)==null?void 0:n.name)||"?",style:{width:"24px",height:"24px",fontSize:"10px",minWidth:"24px",minHeight:"24px"}})},((h=f.user)==null?void 0:h._id)||r)}),o>0&&e.jsxs("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:"2px solid white",marginLeft:"-7px",background:"#E5E5EA",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"700",color:"#636366",zIndex:0},children:["+",o]})]})}),R=d.memo(function({group:i,onClick:x}){var u,m,t,l;const c=((u=i.balance)==null?void 0:u.youOwe)||0,o=((m=i.balance)==null?void 0:m.youAreOwed)||0,f=(t=i.balance)==null?void 0:t.isSettled;let r="",n="#8E8E93";c>0?(r=`-â‚¹${c.toLocaleString()}`,n="#FF3B30"):o>0?(r=`+â‚¹${o.toLocaleString()}`,n="#34C759"):f&&(r="Settled");const h=i.currencySymbol||"â‚¹";c>0?r=`-${h}${c.toLocaleString()}`:o>0&&(r=`+${h}${o.toLocaleString()}`);const s=i.lastActivity?`Last: ${new Date(i.lastActivity.date).toLocaleDateString("en-IN",{month:"short",day:"numeric"})}`:`Created ${new Date(i.createdAt).toLocaleDateString("en-IN",{month:"short",day:"numeric"})}`,g=(((l=i._id)==null?void 0:l.charCodeAt(i._id.length-1))||0)%3===0;return e.jsxs("div",{onClick:x,style:{background:g?"#1C1C2E":"#fff",borderRadius:"24px",padding:"16px",cursor:"pointer",position:"relative",overflow:"hidden",minHeight:"160px",display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",transition:"transform 120ms ease-out",WebkitTapHighlightColor:"transparent"},onTouchStart:a=>a.currentTarget.style.transform="scale(0.97)",onTouchEnd:a=>a.currentTarget.style.transform="scale(1)",children:[r&&e.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",padding:"5px 10px",borderRadius:"100px",background:r==="Settled"?"#E5E5EA":`${n}20`,border:`1px solid ${n}30`},children:e.jsx("span",{style:{fontSize:"12px",fontWeight:"700",color:n},children:r})}),e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"16px",overflow:"hidden",marginBottom:"12px"},children:e.jsx(j,{name:i.name,style:{width:"52px",height:"52px",fontSize:"22px",borderRadius:"16px"}})}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"17px",fontWeight:"700",color:g?"#fff":"#1C1C1E",marginBottom:"8px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.name}),e.jsx(W,{members:i.members,max:3}),e.jsx("p",{style:{fontSize:"12px",color:g?"rgba(255,255,255,0.5)":"#8E8E93",marginTop:"6px"},children:s})]})]})});function $(){var m;const p=E(),{groups:i,loading:x,fetchGroups:c}=z(),{user:o}=k(),[f,r]=d.useState(!1),[n,h]=d.useState("");d.useEffect(()=>{c()},[]);const s=d.useMemo(()=>i.filter(t=>!t.archived),[i]),y=d.useMemo(()=>{if(!n.trim())return s;const t=n.toLowerCase();return s.filter(l=>l.name.toLowerCase().includes(t))},[s,n]),g=d.useMemo(()=>{var a;const t=new Set,l=[];for(const w of s)for(const b of w.members||[]){const S=(a=b.user)==null?void 0:a._id;if(S&&S!==(o==null?void 0:o._id)&&!t.has(S)&&(t.add(S),l.push(b.user),l.length>=8))return l}return l},[s,o]),u=d.useCallback(t=>p(`/groups/${t}`),[p]);return e.jsxs("div",{style:{background:"#F2F2F7",display:"flex",flexDirection:"column",minHeight:"100dvh",maxWidth:"430px",margin:"0 auto",position:"relative"},children:[e.jsxs("div",{style:{padding:"16px 20px 0"},children:[f?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",paddingBottom:"12px"},children:[e.jsxs("div",{style:{flex:1,position:"relative"},children:[e.jsx(C,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#8E8E93",fontSize:"18px"}}),e.jsx("input",{autoFocus:!0,type:"text",value:n,onChange:t=>h(t.target.value),placeholder:"Search groups...",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"12px",border:"none",background:"#E5E5EA",outline:"none",fontSize:"17px",color:"#1C1C1E"}})]}),e.jsx("button",{onClick:()=>{r(!1),h("")},style:{background:"none",border:"none",cursor:"pointer",color:"#007AFF",fontSize:"17px",fontWeight:"400"},children:"Cancel"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",paddingBottom:"16px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",flexShrink:0},children:e.jsx(j,{name:(o==null?void 0:o.name)||"U",style:{width:"40px",height:"40px",fontSize:"16px"}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{fontSize:"13px",color:"#8E8E93",margin:"0 0 1px"},children:"Welcome back ðŸ‘‹"}),e.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",color:"#1C1C1E",margin:0,letterSpacing:"-0.3px"},children:((m=o==null?void 0:o.name)==null?void 0:m.split(" ")[0])||"Groups"})]}),e.jsx("button",{onClick:()=>r(!0),style:{background:"none",border:"none",cursor:"pointer",color:"#1C1C1E",fontSize:"22px"},children:e.jsx(C,{})})]}),g.length>0&&e.jsxs("div",{style:{display:"flex",gap:"16px",overflowX:"auto",paddingBottom:"16px",WebkitOverflowScrolling:"touch",scrollbarWidth:"none"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",flexShrink:0,cursor:"pointer"},onClick:()=>p("/get-started"),children:[e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"50%",background:"#fff",border:"2px dashed #C7C7CC",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"#8E8E93"},children:"+"}),e.jsx("span",{style:{fontSize:"12px",color:"#8E8E93",fontWeight:"500"},children:"New"})]}),g.map((t,l)=>{var a;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",flexShrink:0},children:[e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"50%",border:l===0?"2.5px solid #6347F5":"2.5px solid transparent",overflow:"hidden"},children:e.jsx(j,{name:t.name,style:{width:"52px",height:"52px",fontSize:"18px"}})}),e.jsx("span",{style:{fontSize:"12px",color:"#1C1C1E",fontWeight:"500",maxWidth:"52px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(a=t.name)==null?void 0:a.split(" ")[0]})]},t._id)})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch",padding:"0 20px",paddingBottom:"100px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("p",{style:{fontSize:"13px",fontWeight:"700",color:"#8E8E93",textTransform:"uppercase",letterSpacing:"0.8px"},children:["YOUR GROUPS (",s.length,")"]}),e.jsx("span",{onClick:()=>p("/get-started"),style:{fontSize:"14px",fontWeight:"600",color:"var(--blue)",cursor:"pointer"},children:"+ New Group"})]}),x&&s.length===0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[1,2,3,4].map(t=>e.jsxs("div",{style:{background:"#fff",borderRadius:"24px",padding:"16px",minHeight:"160px"},children:[e.jsx(v,{width:"52px",height:"52px",borderRadius:"16px",style:{marginBottom:"12px"}}),e.jsx(v,{width:"80%",height:"18px",style:{marginBottom:"8px"}}),e.jsx(v,{width:"60%",height:"12px"})]},t))}),!x&&s.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"ðŸ‘¥"}),e.jsx("h3",{style:{fontSize:"22px",fontWeight:"700",color:"#1C1C1E",marginBottom:"8px"},children:"No groups yet"}),e.jsx("p",{style:{fontSize:"16px",color:"#8E8E93",marginBottom:"32px"},children:"Create a group to start splitting with friends."}),e.jsx("button",{onClick:()=>p("/get-started"),style:{padding:"14px 32px",background:"var(--blue)",color:"#fff",fontSize:"17px",fontWeight:"600",borderRadius:"100px",border:"none",cursor:"pointer",boxShadow:"0 8px 24px rgba(99,71,245,0.3)"},children:"Create Group"})]}),y.length>0&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"24px"},children:[y.map(t=>e.jsx(R,{group:t,onClick:()=>u(t._id)},t._id)),e.jsxs("div",{onClick:()=>p("/get-started"),style:{background:"rgba(255,255,255,0.5)",borderRadius:"24px",padding:"16px",cursor:"pointer",minHeight:"160px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"2px dashed #C7C7CC",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"32px",color:"#8E8E93"},children:"+"}),e.jsx("span",{style:{fontSize:"15px",fontWeight:"600",color:"#8E8E93",textAlign:"center"},children:"Create Group"})]})]}),n&&y.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"60px 20px"},children:e.jsxs("p",{style:{fontSize:"17px",color:"#8E8E93"},children:['No groups matching "',n,'"']})}),!n&&s.some(t=>t.lastActivity)&&e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsx("p",{style:{fontSize:"13px",fontWeight:"700",color:"#8E8E93",textTransform:"uppercase",letterSpacing:"0.8px",marginBottom:"12px"},children:"RECENT ACTIVITY"}),s.filter(t=>t.lastActivity).slice(0,3).map(t=>e.jsxs("div",{onClick:()=>u(t._id),style:{background:"#fff",borderRadius:"16px",padding:"14px 16px",marginBottom:"10px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",cursor:"pointer"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(99,71,245,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",flexShrink:0},children:"ðŸ’¸"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{fontSize:"15px",fontWeight:"600",color:"#1C1C1E",margin:"0 0 2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.lastActivity.description}),e.jsxs("p",{style:{fontSize:"13px",color:"#8E8E93",margin:0},children:[new Date(t.lastActivity.date).toLocaleDateString("en-IN",{month:"short",day:"numeric"})," â€¢ ",t.name]})]})]},t._id))]})]}),e.jsx(A,{})]})}export{$ as default};
