import{u as y,a as j,r as g,j as e}from"./index-B3lqKPvk.js";import{I as S,e as C}from"./index-BJ7B7Yjc.js";import{u as v}from"./groupStore-BYNz21HU.js";import{B as w}from"./BottomNav-DIlQ7RtU.js";import{M as z}from"./Modal-W7hMZg0T.js";import"./index-CCTur-5o.js";function R(){const p=y(),{user:o,logout:h}=j(),{groups:c,fetchGroups:f}=v(),[u,a]=g.useState(!1);g.useEffect(()=>{c.length===0&&f()},[]);const b=async()=>{await h(),p("/login",{replace:!0})},i=c.filter(t=>!t.archived),d=i.reduce((t,s)=>{var l;return t+(((l=s.balance)==null?void 0:l.totalSpend)||0)},0),n=new Set;i.forEach(t=>{(t.members||[]).forEach(s=>{var l,x;((l=s.user)==null?void 0:l._id)!==(o==null?void 0:o._id)&&n.add((x=s.user)==null?void 0:x._id)})});const r=[];i.length>=1&&r.push({icon:"ðŸ‘¥",title:"Group Starter",sub:"Created your first group",progress:100,color:"#6347F5",bg:"rgba(99,71,245,0.12)"}),d>=100&&r.push({icon:"ðŸ’¸",title:"Big Spender",sub:"Tracked over â‚¹100 in expenses",progress:Math.min(100,Math.round(d/10)),color:"#FF9500",bg:"rgba(255,149,0,0.12)"}),n.size>=1&&r.push({icon:"ðŸ¤",title:"Social",sub:`${n.size} friend${n.size!==1?"s":""} in groups`,progress:Math.min(100,n.size*20),color:"#34C759",bg:"rgba(52,199,89,0.12)"}),r.length===0&&r.push({icon:"ðŸŒŸ",title:"Getting Started",sub:"Create your first group to earn badges",progress:10,color:"#8E8E93",bg:"rgba(142,142,147,0.12)"});const m=[{icon:"ðŸ‘¤",color:"#5AC8FA",bg:"rgba(90,200,250,0.15)",label:"Account",sub:"Edit profile, change password"},{icon:"ðŸ’³",color:"#6347F5",bg:"rgba(99,71,245,0.12)",label:"Payment Methods",sub:"Manage cards & banks"},{icon:"ðŸ””",color:"#FF9500",bg:"rgba(255,149,0,0.12)",label:"Notifications",sub:"Customize alerts"},{icon:"â“",color:"#34C759",bg:"rgba(52,199,89,0.12)",label:"Help & Support",sub:"FAQ & Contact Us"}];return e.jsxs("div",{style:{background:"#F2F2F7",minHeight:"100dvh",maxWidth:"430px",margin:"0 auto"},children:[e.jsxs("div",{style:{padding:"16px 20px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("button",{onClick:()=>p(-1),style:{width:"36px",height:"36px",borderRadius:"50%",background:"rgba(142,142,147,0.15)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",cursor:"pointer",color:"#1C1C1E"},children:"â†"}),e.jsx("button",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"rgba(142,142,147,0.15)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",cursor:"pointer",color:"#1C1C1E"},children:"âš™ï¸"})]}),e.jsxs("div",{style:{padding:"20px 20px 100px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"28px"},children:[e.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"96px",height:"96px",borderRadius:"50%",background:"linear-gradient(135deg, #FFD88D, #FFB347)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"44px",boxShadow:"0 8px 24px rgba(255,179,71,0.3)",overflow:"hidden"},children:o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:"40px",fontWeight:"700",color:"#fff"},children:((o==null?void 0:o.name)||"U").charAt(0).toUpperCase()})}),i.length>0&&e.jsx("div",{style:{position:"absolute",bottom:"-4px",left:"50%",transform:"translateX(-50%)",background:"#fff",borderRadius:"100px",padding:"3px 10px",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",whiteSpace:"nowrap"},children:e.jsxs("span",{style:{fontSize:"12px",fontWeight:"700",color:"#1C1C1E"},children:[i.length," group",i.length!==1?"s":""," ðŸ”¥"]})})]}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",color:"#1C1C1E",marginBottom:"6px",letterSpacing:"-0.5px"},children:(o==null?void 0:o.name)||"User"}),e.jsx("p",{style:{fontSize:"15px",color:"#8E8E93",marginBottom:"12px"},children:o==null?void 0:o.email})]}),e.jsx("div",{style:{display:"flex",gap:"10px",marginBottom:"28px"},children:[{label:"Total Tracked",value:`â‚¹${d.toFixed(0)}`},{label:"Groups",value:i.length.toString()},{label:"Friends",value:n.size.toString()}].map(t=>e.jsxs("div",{style:{flex:1,background:"#fff",borderRadius:"16px",padding:"14px 10px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[e.jsx("p",{style:{fontSize:"18px",fontWeight:"800",color:"#1C1C1E",marginBottom:"4px",letterSpacing:"-0.3px"},children:t.value}),e.jsx("p",{style:{fontSize:"11px",fontWeight:"500",color:"#8E8E93"},children:t.label})]},t.label))}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:e.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1C1C1E"},children:"Achievements"})}),e.jsx("div",{style:{display:"flex",gap:"12px",overflowX:"auto",marginBottom:"28px",paddingBottom:"4px",WebkitOverflowScrolling:"touch"},children:r.map((t,s)=>e.jsxs("div",{style:{background:"#fff",borderRadius:"20px",padding:"18px",minWidth:"160px",flexShrink:0,boxShadow:"0 2px 12px rgba(0,0,0,0.06)"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:t.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"26px",marginBottom:"12px"},children:t.icon}),e.jsx("p",{style:{fontSize:"15px",fontWeight:"700",color:"#1C1C1E",marginBottom:"4px"},children:t.title}),e.jsx("p",{style:{fontSize:"12px",color:"#8E8E93",marginBottom:"10px"},children:t.sub}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"#8E8E93",fontWeight:"500"},children:"Progress"}),e.jsxs("span",{style:{fontSize:"12px",fontWeight:"700",color:t.progress===100?"#34C759":t.color},children:[t.progress,"%"]})]}),e.jsx("div",{style:{height:"5px",background:"#F2F2F7",borderRadius:"3px"},children:e.jsx("div",{style:{height:"100%",width:`${t.progress}%`,background:t.progress===100?"#34C759":t.color,borderRadius:"3px",transition:"width 600ms ease"}})})]},s))}),e.jsx("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1C1C1E",marginBottom:"12px"},children:"Settings"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:m.map(t=>e.jsxs("div",{style:{background:"#fff",borderRadius:"18px",padding:"16px 18px",display:"flex",alignItems:"center",gap:"14px",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:t.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",flexShrink:0},children:t.icon}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{fontSize:"16px",fontWeight:"700",color:"#1C1C1E",margin:"0 0 2px"},children:t.label}),e.jsx("p",{style:{fontSize:"13px",color:"#8E8E93",margin:0},children:t.sub})]}),e.jsx(S,{style:{fontSize:"18px",color:"#C7C7CC",flexShrink:0}})]},t.label))}),e.jsxs("button",{onClick:()=>a(!0),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"16px",color:"var(--red)",fontSize:"17px",fontWeight:"600",border:"none",background:"none",cursor:"pointer",marginTop:"20px"},children:[e.jsx(C,{style:{fontSize:"22px"}}),"Sign Out"]})]}),e.jsxs(z,{show:u,title:"Sign Out?",message:"You'll need to sign in again to access your groups.",onClose:()=>a(!1),variant:"alert",children:[e.jsx("div",{className:"modal-divider"}),e.jsxs("div",{className:"modal-actions-row",children:[e.jsx("button",{onClick:()=>a(!1),children:"Cancel"}),e.jsx("button",{className:"modal-btn-danger",onClick:b,children:"Sign Out"})]})]}),e.jsx(w,{})]})}export{R as default};
